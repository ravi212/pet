<div class="relative inline-block">

  <!-- Trigger -->
  <button
    type="button"
    class="flex items-center gap-2 rounded-sm border px-3 py-2"
    (click)="open.set(!open())"
  >
    <span
      class="h-4 w-4 rounded"
      [style.background]="value()"
    ></span>
    <span class="text-sm font-medium">{{ value() }}</span>
  </button>

  @if (open()) {
    <div
      class="absolute z-50 mt-2 w-64 rounded-md border bg-white shadow-lg p-4"
    >
      <!-- Palette -->
      <div class="grid grid-cols-6 gap-2">
        @for (color of palette; track color) {
          <button
            class="h-8 w-8 rounded border"
            [style.background]="color"
            (click)="select(color)"
          ></button>
        }
      </div>

      <!-- Recent -->
      @if (recent().length) {
        <div class="mt-4">
          <p class="text-xs text-light-500 mb-2">Recent</p>
          <div class="flex gap-2">
            @for (color of recent(); track color) {
              <button
                class="h-6 w-6 rounded border"
                [style.background]="color"
                (click)="select(color)"
              ></button>
            }
          </div>
        </div>
      }

      <!-- Hex input -->
      <div class="mt-4">
        <input
          type="text"
          class="w-full rounded-sm border px-2 py-1 text-sm"
          [value]="value()"
          (input)="updateHex($event)"
        />
      </div>
    </div>
  }
</div>
