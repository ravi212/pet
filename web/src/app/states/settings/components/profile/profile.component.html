<div class="flex flex-1 md:flex-row flex-col w-full gap-8 md:gap-16  p-4 md:p-6">
  <div class="flex items-center md:items-start m-auto">
    <app-avatar-editor
      [avatarUrl]="avatarUrl || null"
      (action)="onAvatarAction($event)"
      [firstName]="user()?.firstName || ''"
      [lastName]="user()?.lastName || ''"
    ></app-avatar-editor>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 w-full">
    <!-- First Name -->
    <div class="flex flex-col">
      <label class="text-sm font-semibold text-gray-700">First Name</label>
      <div class="flex items-center gap-2 mt-1">
        <ng-container *ngIf="editingField === 'firstName'; else viewFirstName">
          <app-input
            [value]="getControl('firstName').value"
            (inputChange)="getControl('firstName').setValue($event)"
          ></app-input>
          <button class="text-green-600" [disabled]="saving" (click)="save('firstName')">
            <lucide-angular [img]="checkIcon"></lucide-angular>
          </button>
          <button class="text-red-600" (click)="cancelEdit()">
            <lucide-angular [img]="closeIcon"></lucide-angular>
          </button>
        </ng-container>
        <ng-template #viewFirstName>
          <p class="flex-1 text-gray-500">{{ getControl('firstName').value || '—' }}</p>
          <button (click)="startEdit('firstName')">
            <lucide-angular [img]="editIcon"></lucide-angular>
          </button>
        </ng-template>
      </div>
    </div>

    <!-- Last Name -->
    <div class="flex flex-col">
      <label class="text-sm font-semibold text-gray-700">Last Name</label>
      <div class="flex items-center gap-2 mt-1">
        <ng-container *ngIf="editingField === 'lastName'; else viewLastName">
          <app-input
            [value]="getControl('lastName').value"
            (inputChange)="getControl('lastName').setValue($event)"
          ></app-input>
          <button class="text-green-600" [disabled]="saving" (click)="save('lastName')">
            <lucide-angular [img]="checkIcon"></lucide-angular>
          </button>
          <button class="text-red-600" (click)="cancelEdit()">
            <lucide-angular [img]="closeIcon"></lucide-angular>
          </button>
        </ng-container>
        <ng-template #viewLastName>
          <p class="flex-1 text-gray-500">{{ getControl('lastName').value || '—' }}</p>
          <button (click)="startEdit('lastName')">
            <lucide-angular [img]="editIcon"></lucide-angular>
          </button>
        </ng-template>
      </div>
    </div>

    <!-- Timezone -->
    <div class="flex flex-col">
      <label class="text-sm font-semibold text-gray-700">Timezone</label>
      <div class="flex items-center gap-2 mt-1">
        <ng-container *ngIf="editingField === 'timezone'; else viewTimezone">
          <app-input
            [value]="getControl('timezone').value"
            (inputChange)="getControl('timezone').setValue($event)"
          ></app-input>
          <button class="text-green-600" [disabled]="saving" (click)="save('timezone')">
            <lucide-angular [img]="checkIcon"></lucide-angular>
          </button>
          <button class="text-red-600" (click)="cancelEdit()">
            <lucide-angular [img]="closeIcon"></lucide-angular>
          </button>
        </ng-container>
        <ng-template #viewTimezone>
          <p class="flex-1 text-gray-500">{{ getControl('timezone').value || '—' }}</p>
          <!-- <button (click)="startEdit('timezone')">
            <lucide-angular [img]="editIcon"></lucide-angular>
          </button> -->
        </ng-template>
      </div>
    </div>

    <!-- Locale -->
    <div class="flex flex-col">
      <label class="text-sm font-semibold text-gray-700">Locale</label>
      <div class="flex items-center gap-2 mt-1">
        <ng-container *ngIf="editingField === 'locale'; else viewLocale">
          <app-input
            [value]="getControl('locale').value"
            (inputChange)="getControl('locale').setValue($event)"
          ></app-input>
          <button class="text-green-600" [disabled]="saving" (click)="save('locale')">
            <lucide-angular [img]="checkIcon"></lucide-angular>
          </button>
          <button class="text-red-600" (click)="cancelEdit()">
            <lucide-angular [img]="closeIcon"></lucide-angular>
          </button>
        </ng-container>
        <ng-template #viewLocale>
          <p class="flex-1 text-gray-500">{{ getControl('locale').value || '—' }}</p>
          <!-- <button (click)="startEdit('locale')">
            <lucide-angular [img]="editIcon"></lucide-angular>
          </button> -->
        </ng-template>
      </div>
    </div>
  </div>
</div>
